{% extends 'base.html' %}

{% block title %}Mis Notificaciones{% endblock %}

{% block content %}
<style>
  .card-transparent {
    background-color: rgba(255, 255, 255, 0.15) !important; /* fondo semi-transparente */
    color: black !important; /* texto negro por defecto */
  }
  /* Contorno sólo para el título */
  .title-contorno {
    color: white !important;
    text-shadow:
      -1px -1px 0 #000,
       1px -1px 0 #000,
      -1px  1px 0 #000,
       1px  1px 0 #000;
  }
  /* Tabla con fondo transparente */
  .card-transparent table {
    background-color: transparent !important;
    color: black !important;
  }
  /* Bordes tabla más claros */
  .card-transparent table th,
  .card-transparent table td {
    border-color: rgba(0, 0, 0, 0.15) !important;
  }
</style>

<div class="container mt-4">
  <div class="card card-transparent">
    <div class="card-header">
      <h4 class="mb-0 title-contorno">Mis notificaciones</h4>
    </div>
    <div class="card-body">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Notificación</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for notif in user_notifications %}
          <tr>
            <td>{{ notif.notification.title }}</td>
            <td>
              <a href="{% url 'accounts_app:user_notification_detail' notif.pk %}" class="btn btn-primary btn-sm">Ver mensaje</a>
              <form action="{% url 'accounts_app:user_notification_delete' notif.pk %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm" title="Eliminar">&times;</button>
              </form>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="2">No tienes notificaciones.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <form action="{% url 'accounts_app:user_notification_delete_all' %}" method="post" class="mt-3">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">Eliminar todas las notificaciones</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
